(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{36626:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var l=t(80854),a=t(26422),n=t(17894),i=t(97493),r=t(52120),d=t(97816),c=t(41076),o=t(29010),h=t(26570),m=t(31978),g=t(36745),u=t(2257);let p=(0,u.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var x=t(53302);let j=(0,u.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var b=t(58943),v=t(59767);function f(){let[e,s]=(0,a.useState)([]),[t,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await (0,n.nr)("/admin/blog");s(e)}catch(e){b.oR.error("Failed to fetch blogs")}finally{u(!1)}},y=async()=>{if(confirm("Publish all pending blogs?"))try{let e=await (0,n.nr)("/admin/blog/publish-now",{method:"POST"});b.oR.success("".concat(e.published," blogs published")),f()}catch(e){b.oR.error("Failed to publish blogs")}},S=[{header:"Title",accessor:e=>(0,l.jsx)("div",{className:"max-w-md font-medium",children:e.title||"Untitled"})},{header:"Status",accessor:e=>(0,l.jsx)(g.E,{variant:e.published?"default":"secondary",children:e.published?"Published":"Draft"})},{header:"Tags",accessor:e=>{let s=Array.isArray(e.tags)?e.tags:[];return(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:s.slice(0,3).map((e,s)=>(0,l.jsx)(g.E,{variant:"outline",className:"text-xs",children:e},s))})}},{header:"Created",accessor:e=>(0,v.J)(e.created_at,"MMM d, yyyy","Invalid date")},{header:"Published",accessor:e=>e.published_at?(0,v.J)(e.published_at,"MMM d, yyyy","Invalid date"):"N/A"}],_=Array.isArray(e)?e:e&&"object"==typeof e?Object.values(e):[],[w,N]=(0,a.useState)(!1),[k,J]=(0,a.useState)(null),[M,T]=(0,a.useState)(!1),C=async e=>{if(confirm("Delete this blog? This action cannot be undone."))try{await (0,n.nr)("/admin/blog/".concat(e),{method:"DELETE"}),b.oR.success("Blog deleted"),f()}catch(e){b.oR.error("Failed to delete blog")}},P=async e=>{if(e.preventDefault(),!k)return;let s=new FormData(e.currentTarget),t={title:String(s.get("title")||"")||null,slug:String(s.get("slug")||"")||null,tags:String(s.get("tags")||"")?String(s.get("tags")).split(",").map(e=>e.trim()):[],image_urls:String(s.get("image_urls")||"")?String(s.get("image_urls")).split(",").map(e=>e.trim()):[],image_prompts:String(s.get("image_prompts")||"")?String(s.get("image_prompts")).split(",").map(e=>e.trim()):[],content_html:String(s.get("content_html")||"")||null,content_markdown:String(s.get("content_markdown")||"")||null,published:"true"===String(s.get("published"))};try{T(!0),await (0,n.nr)("/admin/blog/".concat(k.id),{method:"PUT",body:JSON.stringify(t)}),b.oR.success("Blog updated"),J(null),f()}catch(e){b.oR.error("Failed to update blog")}finally{T(!1)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Blogs"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage blog posts and content"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(r.$,{onClick:y,children:[(0,l.jsx)(p,{className:"h-4 w-4 mr-2"}),"Publish All Pending"]}),(0,l.jsxs)(d.lG,{children:[(0,l.jsx)(d.zM,{asChild:!0,children:(0,l.jsx)(r.$,{variant:"outline",children:"Generate Blog"})}),(0,l.jsxs)(d.Cf,{className:"max-h-[80vh] overflow-auto",children:[(0,l.jsx)(d.c7,{children:(0,l.jsx)(d.L3,{children:"Generate Blog"})}),(0,l.jsxs)("form",{id:"generate-blog-form",onSubmit:async e=>{e.preventDefault();let s=new FormData(e.currentTarget),t={title:String(s.get("title")||"")||null,slug:String(s.get("slug")||"")||null,tags:String(s.get("tags")||"")?String(s.get("tags")).split(",").map(e=>e.trim()):[],image_urls:String(s.get("image_urls")||"")?String(s.get("image_urls")).split(",").map(e=>e.trim()):[],image_prompts:String(s.get("image_prompts")||"")?String(s.get("image_prompts")).split(",").map(e=>e.trim()):[],content_html:String(s.get("content_html")||"")||null,content_markdown:String(s.get("content_markdown")||"")||null,published:"true"===String(s.get("published"))};try{N(!0),await (0,n.nr)("/admin/blog",{method:"POST",body:JSON.stringify(t)}),b.oR.success("Blog generated/added"),f()}catch(e){b.oR.error("Failed to generate blog")}finally{N(!1)}},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Title"}),(0,l.jsx)(c.p,{name:"title",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Slug"}),(0,l.jsx)(c.p,{name:"slug",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Tags (comma separated)"}),(0,l.jsx)(c.p,{name:"tags",placeholder:"technology,programming"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Image URLs (comma separated)"}),(0,l.jsx)(c.p,{name:"image_urls",placeholder:"https://img1,https://img2"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Image Prompts (comma separated)"}),(0,l.jsx)(c.p,{name:"image_prompts",placeholder:"prompt1,prompt2"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Content (HTML)"}),(0,l.jsx)(h.T,{name:"content_html",rows:3})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Content (Markdown)"}),(0,l.jsx)(h.T,{name:"content_markdown",rows:3})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Published"}),(0,l.jsxs)("select",{name:"published",className:"w-full border rounded px-2 py-1",children:[(0,l.jsx)("option",{value:"false",children:"No"}),(0,l.jsx)("option",{value:"true",children:"Yes"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,l.jsx)(d.HM,{asChild:!0,children:(0,l.jsx)("button",{type:"button",className:"btn-outline",children:"Cancel"})}),(0,l.jsx)(r.$,{type:"submit",disabled:w,children:w?"Submitting...":"Submit"})]})]})]})]})]})]}),(0,l.jsxs)(m.Zp,{children:[(0,l.jsx)(m.aR,{children:(0,l.jsxs)(m.ZB,{children:["All Blogs (",_.length,")"]})}),(0,l.jsx)(m.Wu,{children:t?(0,l.jsx)("div",{className:"text-center py-8",children:"Loading blogs..."}):(0,l.jsx)(i.b,{data:_,columns:S,actions:e=>(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>J(e),children:(0,l.jsx)(x.A,{className:"h-4 w-4"})}),(0,l.jsx)(r.$,{className:"bg-red-600 hover:bg-red-700 text-white",size:"sm",onClick:()=>{e.id&&C(e.id)},children:(0,l.jsx)(j,{className:"h-4 w-4"})})]})})})]}),(0,l.jsx)(d.lG,{open:!!k,onOpenChange:e=>{e||J(null)},children:(0,l.jsxs)(d.Cf,{className:"max-h-[80vh] overflow-auto",children:[(0,l.jsx)(d.c7,{children:(0,l.jsx)(d.L3,{children:"Edit Blog"})}),k&&(0,l.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Title"}),(0,l.jsx)(c.p,{name:"title",defaultValue:k.title||"",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Slug"}),(0,l.jsx)(c.p,{name:"slug",defaultValue:k.slug||"",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Tags (comma separated)"}),(0,l.jsx)(c.p,{name:"tags",defaultValue:(k.tags||[]).join(",")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Image URLs (comma separated)"}),(0,l.jsx)(c.p,{name:"image_urls",defaultValue:(k.image_urls||[]).join(",")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Image Prompts (comma separated)"}),(0,l.jsx)(c.p,{name:"image_prompts",defaultValue:(k.image_prompts||[]).join(",")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Content (HTML)"}),(0,l.jsx)(h.T,{name:"content_html",rows:3,defaultValue:k.content_html||""})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Content (Markdown)"}),(0,l.jsx)(h.T,{name:"content_markdown",rows:3,defaultValue:k.content_markdown||""})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.J,{children:"Published"}),(0,l.jsxs)("select",{name:"published",className:"w-full border rounded px-2 py-1",defaultValue:k.published?"true":"false",children:[(0,l.jsx)("option",{value:"false",children:"No"}),(0,l.jsx)("option",{value:"true",children:"Yes"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,l.jsx)(d.HM,{asChild:!0,children:(0,l.jsx)("button",{type:"button",className:"btn-outline",children:"Cancel"})}),(0,l.jsx)(r.$,{type:"submit",disabled:M,children:M?"Saving...":"Save"})]})]})]})})]})}},53302:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(2257).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},97716:(e,s,t)=>{Promise.resolve().then(t.bind(t,36626))}},e=>{var s=s=>e(e.s=s);e.O(0,[910,943,579,427,230,569,977],()=>s(97716)),_N_E=e.O()}]);